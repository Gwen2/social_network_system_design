# System Design социальной сети для курса по System Design от Baluncourses
## Домашнее задание №1. Функциональные требования для проекта "Социальная сеть для путешественников"
### Описание от бизнеса
- публикация постов из путешествий с фотографиями, небольшим описанием и привязкой к конкретному месту путешествия;
- оценка и комментарии постов других путешественников;
- подписка на других путешественников, чтобы следить за их активностью;
- поиск популярных мест для путешествий и просмотр постов с этих мест;
- просмотр ленты других путешественников и ленты пользователя, основанной на подписках в обратном хронологическом порядке;

> Что касается будущей аудитории социальной сети - у бизнеса есть огромные средства для рекламы и продвижения социальной сети, поэтому пользовательская база будет постепенно линейно расти и предполагается, что через год достигнет примерно 10 000 000 уникальных пользователей в день, после чего также будет продолжать расти. Бизнес пока нацелен  только на аудиторию стран СНГ (*на зарубежный рынок выходить планов нет*). Будущая система должна быть очень надежной, а также, чтобы с ней было удобно взаимодействовать, используя мобильные устройства и браузер.

### Функциональные требования
- CRUD операции с постами (текст, фотографии, геотэг, дата)
- Оценка постов (тип оценки, автор, дата)
- CRUD комментариев к постам (текст, автор, дата)
- Возможность подписки/отписки на пользователей
- Получение списка пользователей, на которых ты подписан
- Просмотр чужих постов
- Поиск мест по популярности (количеству постов)
- Просмотр всех постов с выбранного места
- Просмотр ленты постов

### Нефункциональные требования
- 10 mln DAU
- аудитория стран СНГ
- Интерфейс адаптирован под десктоп, планшеты и под смартфоны.
- активность пользователей
  - 0.5 новых поста в день (среднее)
  - 20 оценок в день (среднее)
  - 40 просмотров постов в день (среднее)
  - 100 просмотров ленты постов (20 постов без комментариев) в день (среднее)
  - 30 комментариев у каждого поста (среднее)
  - 1 подписка/отписка в день (среднее)
  - 1 просмотр списка подписок в день (среднее)
  - 5 поисков мест по популярности в день (среднее)
- Летом и зимой нагрузка на 30% больше
- Данные храним всегда
- Лимиты
  - 100 постов в день
  - 1000 оценок в день
  - 300 комментариев в день
  - 100 подписок в день
  - 5000 подписчиков максимально
- Временные ограничения
  - 2 секунды на создание/редактирование/удаление поста
  - 0,5 секунды на выставление оценки
  - 1 секунда на загрузку поста с комментариями
  - 2 секунды на загрузку страницы ленты постов (20 постов)
  - 1 секунда на создание/редактирование/удаление комментария
  - 1 секунда по подписку/отписку
  - 1 секунда на просмотр страницы списка подписок (100 штук)
  - 2 секунды на загрузку результатов поиска мест по популярности (30 результатов)
  - 2 секунды на просмотр списка постов с выбранного места
- Доступность - приложение доступно 99.99% времени в год

### Расчет нагрузки
#### Размеры
- Пост - 3 мб
  - 10 картинок (300 кб) - 3мб
  - Текст - 5 кб
  - Дата - 8 б
  - Автор (id) - 8 б
- Оценка поста - 10 б
  - Тип - 4 б
  - Автор (id) - 4 б
- Комментарии к посту - 30 * 500 б = 15 кб
  - Комментарий к посту - 500 б
    - 500 б
    - дата - 8 б
    - автор - 8 б
- Подписка - 5 б
  - Пользователь (id) - 4 б
- Результаты поиска по месту - 30 * 350 б = 10 кб 
  - Описание места - 350 б
    - Название - 200 б
    - Координаты - 20 б
    - Ссылки на посты - 30 * 4 б = 120 б

#### Нагрузка
- Написание постов
  - 10 млн * 0.5 * 3 мб = 15 000 000 мб = 15 Тб
- Выставление оценок
  - 10 млн * 20 * 10 б = 2000 мб = 2 Гб 
- Просмотры постов (с комментариями)
  - 10 млн * 40 * (3 мб + 15 кб) = 120 мб * 10 млн = 1.2 Пб
- Просмотры ленты постов (без комментариев)
  - 10 млн * 100 * (20 постов * 3 мб) = 6000 мб * 10 млн = 5 Пб
- Подписки/отписки
  - 10 млн * 5 б = 50 мб
- Просмотр списка подписок
  - 10 млн * (100 * 5 б) = 1 гб
- Поиск мест
  - 10 млн * (5 * 10 кб) = 500 гб
